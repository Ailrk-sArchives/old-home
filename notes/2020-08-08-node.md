-- tag note nodejs async event-loop
-- title nodejs
-- date 2020-08-08
-- source https://blog.insiderattack.net/five-misconceptions-on-how-nodejs-works-edfb56f7b3a6
;;
# NodeJS overview
Some big pic of how nodejs is structured.

## Building blocks
```
===================================================
                 NodeJs stdlib
===================================================
                node C++ bindings
===================================================
 v8 | libuv | c-ares | http parser | crypto | zlib
===================================================
```

## EventEmitter
Event driven pattern is used intensively in node apis. An `EventEmitter` holds and manage events and there corresponding listenders. you have an `emitter` emits certain event (a string), which will cause a listenders to be called.

All objects that emit events are instance of `EventEmitter`. Typically function `emitter.on()` lets you bind listenders to a specific event, and `emitter.emit()` is called to trigger an event.

```javascript
class MyEmitter extends EventEmitter {}
const e = new MyEmitter();
e.on('event', function(a, b) => {
    // `this` is intentionally been set to `e`.
    console.log(a, b, this, this === e);
})
e.on('event1', (a, b) => {
    // with arrow function this referes to the function scope.
    console.log(a, b, this, this === e);
})
```

```
===================================================
            EventEmitter
===================================================
 events|  handlers
=======|===========================================
   e1  |   listener1(), listener2()
   e2  |   listener3(), listener4(), listener5()
   e3  |   listener6()
 error |   listener7()
===================================================
```
